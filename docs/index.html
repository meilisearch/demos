<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Meili crates browser 2000</title>
<meta name="twitter:title" content="Meili crates browser 2000">
<link rel=preload as=style href="/index.css?ia">
<link rel=preload as=font href="/va9B4kDNxMZdWfMOD5VnLK3eRhf6Xl7Glw.woff2" crossorigin="anonymous">
<link rel=preload as=font href="/va9B4kDNxMZdWfMOD5VnPKreRhf6Xl7Glw.woff2" crossorigin="anonymous">
<link rel=preload as=font href="/va9E4kDNxMZdWfMOD5Vvl4jLazX3dA.woff2" crossorigin="anonymous">
<style>@charset "UTF-8";#search>input,body,html{background:#fff;color:#222}@font-face{font-family:'Fira Sans';font-style:normal;font-weight:700;src:local("Fira Sans Bold"),local("FiraSans-Bold"),url(/va9B4kDNxMZdWfMOD5VnLK3eRhf6Xl7Glw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap}@font-face{font-family:'Fira Sans';font-style:normal;font-weight:300;src:local("Fira Sans Light"),local("FiraSans-Light"),url(/va9B4kDNxMZdWfMOD5VnPKreRhf6Xl7Glw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:optional}@font-face{font-family:'Fira Sans';font-style:normal;font-weight:400;src:local("Fira Sans Regular"),local("FiraSans-Regular"),local("Fira Sans ot"),url(/va9E4kDNxMZdWfMOD5Vvl4jLazX3dA.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:fallback}body,html{font-family:"fira sans ot","fira sans","trebuchet ms",roboto,sans-serif;line-height:1.6;margin:0;padding:0}h1,h2,h3,h4,h5{font-family:"fira sans ot","fira sans",ubuntu,roboto,"-apple-system","trebuchet ms",sans-serif}#package .desc,#package h2{font-family:"fira sans ot","fira sans",ubuntu,roboto,"-apple-system",helvetica,sans-serif}header{padding:1em 0 0}.inner-col{padding:0 1em;margin:0 auto;max-width:60em;box-sizing:border-box}#search{padding:0;white-space:nowrap;margin:1em 0}#search>button,#search>input{margin:0;font-size:1.25em;line-height:1.6;font-family:"fira sans ot","fira sans","trebuchet ms",roboto,sans-serif}#search>input{-webkit-appearance:none;outline:0;-webkit-transition:color .3s ease-in;transition:color .3s ease-in;border:1px solid #aaa;padding:1px 1ex;max-width:70%;box-shadow:inset 1px 2px 5px rgba(0,0,0,.08)}#search>input::-webkit-input-placeholder{font-size:.9em;-webkit-transition:color .3s ease-in-out;transition:color .3s ease-in-out;font-weight:300;color:#aaa}#search>input::-moz-placeholder{font-size:.9em;-webkit-transition:color .3s ease-in-out;transition:color .3s ease-in-out;font-weight:300;color:#aaa}#search>input:-ms-input-placeholder{font-size:.9em;-webkit-transition:color .3s ease-in-out;transition:color .3s ease-in-out;font-weight:300;color:#aaa}#search>input::-ms-input-placeholder{font-size:.9em;-webkit-transition:color .3s ease-in-out;transition:color .3s ease-in-out;font-weight:300;color:#aaa}#search>input::placeholder{font-size:.9em;-webkit-transition:color .3s ease-in-out;transition:color .3s ease-in-out;font-weight:300;color:#aaa}#search>input:hover::-webkit-input-placeholder{color:#ddd}#search>input:hover::-moz-placeholder{color:#ddd}#search>input:hover:-ms-input-placeholder{color:#ddd}#search>input:hover::-ms-input-placeholder{color:#ddd}#search>input:hover::placeholder{color:#ddd}@media (prefers-color-scheme:dark){body,html{background:#282a36;color:#bcc2d7}#search>input{background:#464959;color:#fcfcfd}#search>input::-webkit-input-placeholder{color:#acb3cd}#search>input::-moz-placeholder{color:#acb3cd}#search>input:-ms-input-placeholder{color:#acb3cd}#search>input::-ms-input-placeholder{color:#acb3cd}#search>input::placeholder{color:#acb3cd}#search>input:hover::-webkit-input-placeholder{color:#8c96ba}#search>input:hover::-moz-placeholder{color:#8c96ba}#search>input:hover:-ms-input-placeholder{color:#8c96ba}#search>input:hover::-ms-input-placeholder{color:#8c96ba}#search>input:hover::placeholder{color:#8c96ba}}@media (min-width:640px){#search>input{min-width:18em}}#search>button{cursor:pointer;background:#84f;color:#fafafa;box-shadow:inset 2px 2px 7px rgba(210,180,255,.4);font-weight:700;text-shadow:0 1px 0 #000;border:1px solid #000;border-left:0;padding:1px 1ex}header#error{background:#ffd800}#results{min-height:75vh}#results>.inner-col{padding:0}#results .tryalso{padding:.5em;margin:1em .5em;border:1px solid #eee;border-radius:3px}#results .notfound{padding-left:.5em;font-size:2em;color:#666}#results ol{margin:1em 0;padding:0;list-style:none}#results ol>li{margin:0;padding:0}#results li>a{contain:style paint;display:block;overflow:hidden;padding:1em;text-decoration:none;color:inherit}#results li>a:link h4{color:#01d}@media (prefers-color-scheme:dark){#search>button{color:#f1deff}#search>button:hover{color:#fafafa}header#error{background:#7b0000}#results .tryalso{border:1px solid #557;background:#191a20}#results .notfound{color:#bbc}#results li>a:link h4{color:#49a4e4}}#results li>a:visited h4{color:#719}#results li>a:hover{background:#f7f7f7}#results li>a:hover code{background:#c4c4c4}#results li>a:hover .desc{color:#222}@media (prefers-color-scheme:dark){#results li>a:visited h4{color:#a68bfc}#results li>a:hover{background:#2f313d}#results li>a:hover code{background:#191a20}#results li>a:hover .desc{color:#ccd1e1}}#results li>a:hover h4{text-decoration:underline}#results li>a:hover .meta{opacity:.8}#results li>a:hover .nightly{background:#019;border-color:#000b66;color:#fafafa!important}#results li>a>.h{line-height:1.3;font-size:1.05em;margin:0 0 .333em}#results li>a .desc,#results li>a h4{display:inline}#results li>a .desc{color:#222;font-weight:400}#results li>a .desc code{border:0}@media (max-width:640px){#results li>a h4{font-size:1em}#results li>a .desc{font-size:.85em}}#results li>a h4{font-size:1.1em;margin:0 .5ex 0 0;font-weight:500}#results .meta{font-size:.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#2f2f2f}@media (prefers-color-scheme:dark){#results li>a .desc{color:#bcc2d7}#results .meta{color:#dcdfea}}#results .downloads,#results .k,#results .labels>span,#results .version{margin-right:2ex}#results .downloads{color:#222}#results .downloads b{color:#222;font-weight:400;padding-left:.1ex}#results .downloads::before{content:"‚¨áÔ∏é";color:#c4c4c4;margin:0 .25ex 0 0;text-decoration:underline;vertical-align:7%;font-size:.8em}@media (prefers-color-scheme:dark){#results .downloads,#results .downloads b{color:#9ca5c4}#results .downloads::before{color:#737892}}#results .version{color:#a02000}#results .version.stable{color:#009b5d}@media (prefers-color-scheme:dark){#results .version{color:#a20}#results .version.stable{color:#0a6}#results .version.okay{color:#911d00}}#results .version.okay{color:#911d00}#results .version.eek{color:#ff4111;font-weight:700}#results .version>span{opacity:.6;padding-right:.1ex}#results .k{color:#888;font-weight:300}#results .k>span{color:#bbb;padding-right:.1ex}#results .labels>span{font-size:.9em;vertical-align:3%;color:#888;border:1px solid #a2a2a2;border-radius:3px;padding:0 3px}#results .labels>span.nightly{color:#019;border-color:1px solid #a2a2a2}@media (prefers-color-scheme:dark){#results .version.eek{color:#ff4111}#results .labels>span.nightly{color:#67f;border-color:1px solid #fff}}</style>

<style>
h4 em {
  font-style: inherit;
}

p.desc em {
  font-style: inherit;
}

@media (prefers-color-scheme:dark) {
  h4 em {
    background-color: #464855;
  }

  p.desc em {
    background-color: #a4b0ff40;
  }
}

@media (prefers-color-scheme:light) {
  h4 em {
    background-color: #a4b0ff5e;
  }

  p.desc em {
    background-color: #8b9bff4f;
  }
}

#request-time {
  margin-left: 20px;
}

header h3 {
  font-size: 2.5em;
  line-height: 1.08;
  margin: .44em 0 0;
}

header h4 {
  font-size: 1.8em;
  line-height: 1.08;
  margin: .44em 0 0;
}
</style>

<link rel=stylesheet href="/index.css?ia">
<meta name="robots" content="noindex, follow">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@CratesRS" />
<meta name="og:site_name" content="Meili crates browser 2000" />
<meta name="og:type" content="website" />
<meta name="og:determiner" content="">
<meta name="og:image:url" content="https://lib.rs/crates-logo.png">
<meta name="twitter:image" content="https://lib.rs/crates-logo.png">
<link rel=preconnect href="//img.gs" crossorigin="anonymous">
<link rel=icon href="https://lib.rs/favicon.png">
<link rel="mask-icon" href="/logo.svg">
<meta name="theme-color" content="#aaaaaa">
<meta name="color-scheme" value="light dark">
<link title="Meili crates browser 2000" type="application/opensearchdescription+xml" rel="search" href="/opensearch.xml">

<script type="text/javascript">
  (function(e,t){var n=e.amplitude||{_q:[],_iq:{}};var r=t.createElement("script")
  ;r.type="text/javascript"
  ;r.integrity="sha384-d/yhnowERvm+7eCU79T/bYjOiMmq4F11ElWYLmt0ktvYEVgqLDazh4+gW9CKMpYW"
  ;r.crossOrigin="anonymous";r.async=true
  ;r.src="https://cdn.amplitude.com/libs/amplitude-5.2.2-min.gz.js"
  ;r.onload=function(){if(!e.amplitude.runQueuedFunctions){
  console.log("[Amplitude] Error: could not load SDK")}}
  ;var i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)
  ;function s(e,t){e.prototype[t]=function(){
  this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}
  var o=function(){this._q=[];return this}
  ;var a=["add","append","clearAll","prepend","set","setOnce","unset"]
  ;for(var u=0;u<a.length;u++){s(o,a[u])}n.Identify=o;var c=function(){this._q=[]
  ;return this}
  ;var l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"]
  ;for(var p=0;p<l.length;p++){s(c,l[p])}n.Revenue=c
  ;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"]
  ;function v(e){function t(t){e[t]=function(){
  e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}
  for(var n=0;n<d.length;n++){t(d[n])}}v(n);n.getInstance=function(e){
  e=(!e||e.length===0?"$default_instance":e).toLowerCase()
  ;if(!n._iq.hasOwnProperty(e)){n._iq[e]={_q:[]};v(n._iq[e])}return n._iq[e]}
  ;e.amplitude=n})(window,document);

  amplitude.getInstance().init("6696ad48de06bdb7c8e964ccd7c5b14b");
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<script id="entry-template" type="text/x-handlebars-template">
<li>
    <a href="https://lib.rs/crates/{{innerText name}}">
        <div class=h>
            <h4>{{{name}}}</h4>
            <p class=desc>{{{sanitizeHTMLEntities description}}}</p>
        </div>
        <div class=meta>
            <span class="version stable"><span>v</span>{{version}}</span>
            {{#if downloads}}
              <span class="downloads" title="{{downloads}} recent downloads">{{formatBigNumber downloads}}</span>
            {{/if}}
            {{#each keywords}}
            <span class=k><span>#</span>{{this}}</span>
            {{/each}}
        </div>
    </a>
</li>
</script>

<script>

var beautify=n=>((Math.log10(n)/3|0)==0)?n:Number((n/Math.pow(10,(Math.log10(n)/3|0)*3)).toFixed(1))+["","K","M","B","T",][Math.log10(n)/3|0];

var source = document.getElementById("entry-template").innerHTML;
var template = Handlebars.compile(source);

function sanitizeHTMLEntities(str) {
  if (str && typeof str === 'string') {
    str = str.replace(/</g,"&lt;");
    str = str.replace(/>/g,"&gt;");
    str = str.replace(/&lt;em&gt;/g,"<em>");
    str = str.replace(/&lt;\/em&gt;/g,"<\/em>");
  }
  return str;
}

function innerText(s) {
  var div = document.createElement('div');
  div.innerHTML = s;
  return div.innerText;
}

function handleForm() {
  let elem = $("#handlebars-list li:first-child")[0];
  if (elem) {
    window.location.href = elem.firstElementChild.href;
  }
  return false;
}

function setGetParam(key,value) {
  if (history.pushState) {
    var params = new URLSearchParams(window.location.search);
    params.set(key, value);
    var newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' + params.toString();
    window.history.pushState({path:newUrl},'',newUrl);
  }
}

function getParam(key) {
  var params = new URLSearchParams(window.location.search);
  return params.get(key);
}

$(document).ready(function () {
  var url = 'https://finding-demos.meilisearch.com';
  var indexUID = 'crates';
  var apiKey = '2b902cce4f868214987a9f3c7af51a69fa660d74a785bed258178b96e3480bb3';
  var browseResult;
  var request;

  function fillBrowseDocuments() {
    $("#request-time").text(`-- ms`);
    $("#handlebars-list").empty();
    let out_html = "";
    $.each(browseResult, function (_, value) {
      out_html += template(value);
    });
    $("#handlebars-list").html(out_html)
  }

  function browseDocuments() {
    if (request) { request.abort() }

    if (browseResult) {
      fillBrowseDocuments(browseResult);
      return;
    }

    request = $.ajax({
      url: `${url}/indexes/${indexUID}/documents`,
      type: 'GET',
      headers: {
        'X-Meili-API-Key': apiKey
      },
      dataType: 'json',
      success: function (data) {
        browseResult = data;
        fillBrowseDocuments();
      }
    });
  }

  Handlebars.registerHelper("formatBigNumber", beautify);
  Handlebars.registerHelper("sanitizeHTMLEntities", sanitizeHTMLEntities);
  Handlebars.registerHelper("innerText", innerText);

  amplitude.getInstance().logEvent('page_loaded');

  $("#textSearch").on('input', function () {
    let value = $("#textSearch").val();

    setGetParam('q', value);

    if (value.trim() == "") {
      browseDocuments();
      return;
    }

    if (request) { request.abort() }

    request = $.ajax({
      url: `${url}/indexes/${indexUID}/search`,
      type: 'GET',
      headers: {
        'X-Meili-API-Key': apiKey
      },
      data: {
        'attributesToHighlight': '*',
        'q': value
      },
      dataType: 'json',
      success: function (data, status) {
        amplitude.getInstance().logEvent('search', {
          'query': data.query,
          'time': data.processingTimeMs
        });

        $("#request-time").text(`${data.processingTimeMs} ms`);
        $("#handlebars-list").empty();
        let out_html = "";
        $.each(data.hits, function (_, result) {
          const element = {...result, ...result._formatted };
          delete element._formatted;
          out_html += template(element);
        });
        $("#handlebars-list").html(out_html)
      },
    });
  });

  let query = getParam('q');
  if (query) {
    $("#textSearch").val(query).trigger("input");
  } else {
    browseDocuments();
  }

});
</script>

<body vocab="http://schema.org/">
  <header id="serp">
      <div class="inner-col">
          <h3>Meili crates browser 2000</h3>

          <p>
            This search bar is provided by <a href="https://meilisearch.com">Meili</a>,
            it is a demonstration of our instant search engine.
            <br/>
            If you want to take a look at the project source code, it's your lucky day as it is <a href="https://github.com/meilisearch/MeiliDB">available on github</a>.
            <br/>
            We wrote a blog post about <a href="https://blog.meilisearch.com/meili-finds-rust-crates/">how we made this search engine available for you</a>.
            <br/>
            The whole design was taken from <a href="https://lib.rs">lib.rs</a> because we love it.
            <br/>
            <br/>
            We pull new crates and crates updates every <em>10 minutes</em> from <a href="https://docs.rs/releases">docs.rs</a> and
            all the downloads counts <em>every day at 3:30 PM UTC</em> from <a href="https://crates.io/data-access">crates.io</a>.
            Currently we have something like <em> 31 729 crates</em>.
            <br/>
            <br/>
            Have fun using it ‚å®Ô∏è üí®
            <br/>
          </p>

          <form role="search" id=search onSubmit="handleForm(); return false">
              <input placeholder="name, keywords, description" autofocus autocapitalize="off" autocorrect="off" autocomplete="off" tabindex="1" type=search id="textSearch">
              <span id="request-time">-- ms</span>
          </form>
          <nav>
              <ul>
                  <li class=active>Sorted by relevance</li>
              </ul>
          </nav>
      </div>
  </header>
  <main id="results">
      <div class="inner-col">
          <ol id="handlebars-list">
              <!--crates in here from handlebars -->
          </ol>
      </div>
  </main>

  <footer>
      <div class="inner-col">
          <p>Search powered by <a href="https://github.com/meilisearch/MeiliDB">MeiliDB</a>.</p>
      </div>
  </footer>

</body>
</html>
